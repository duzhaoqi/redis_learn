#  基础设置

- 认证设置
- 删除数据库
- 事务机制


## 认证设置

在配置文件中找到`requirepass`，取消其前面的注释，后面跟的就是认证的字符串，在我们使用客户端登陆后，需要进行认证。  
```
# requirepass foobared
 requirepass du
```
认证方式如下：  
```
[root@ub1 ~]$./redis-cli 
127.0.0.1:6379> get name
(error) NOAUTH Authentication required.
127.0.0.1:6379> auth du
OK
```
## 删除数据库
删除数据库的两个命令：  
```
fuashdb 删除单个
flushall 删除所有
```
## 事务机制

redis的事务机制和mysql的事物机制是不一样的，redis的事物机制是通过`multi`，`exec`，`watch`等命令实现事务机制，讲一个或多个命令归并为一个操作请求服务器按顺序执行的机制，如果在执行过程中出现问题，咋会回滚到事物开始之前的状态。

- multi：启动一个事务
- exec：执行事物

一次性将事务中的所有操作执行完成后返回给客户端；

```
127.0.0.1:6379> multi
OK
127.0.0.1:6379> set name du
QUEUED
127.0.0.1:6379> set ip 11.11.11.11
QUEUED
127.0.0.1:6379> get name
QUEUED
127.0.0.1:6379> get ip
QUEUED
127.0.0.1:6379> exec
1) OK
2) OK
3) "du"
4) "11.11.11.11"
127.0.0.1:6379>
```
- watch ：乐观锁，在exec命令执行之前，用于监视指定的键，如果监视中的任意键的数据被修改，则服务器拒绝执行事物。  

### 示例：  
客户端A：  
```
127.0.0.1:6379> watch ip
OK
127.0.0.1:6379> multi
OK
127.0.0.1:6379> set ip 22.22.22.22
QUEUED
127.0.0.1:6379> get ip
QUEUED
127.0.0.1:6379>
```
客户端B:  
```
127.0.0.1:6379> set ip 33.33.33.33
OK
```
客户端A：  
```
127.0.0.1:6379> watch ip
OK
127.0.0.1:6379> multi
OK
127.0.0.1:6379> set ip 22.22.22.22
QUEUED
127.0.0.1:6379> get ip
QUEUED
127.0.0.1:6379>exec
(nil)
127.0.0.1:6379> get ip
"33.33.33.33"
```